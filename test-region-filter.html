<!DOCTYPE html>
<html>
<head>
    <title>Region Filter Test</title>
</head>
<body>
    <h1>Region Filter Test</h1>
    
    <select id="regionSelect">
        <option value="">전체 지역</option>
        <option value="서울">서울</option>
        <option value="부산">부산</option>
        <option value="대구">대구</option>
    </select>
    
    <button id="testButton">Test Filter</button>
    <div id="result"></div>

    <script>
    document.getElementById('testButton').addEventListener('click', async () => {
        const region = document.getElementById('regionSelect').value;
        
        if (!region) {
            document.getElementById('result').innerHTML = '<p>지역을 선택해주세요</p>';
            return;
        }
        
        const params = new URLSearchParams({ region, limit: 3 });
        const url = `/api/properties?${params}`;
        
        console.log('Testing URL:', url);
        console.log('Region value:', region);
        
        try {
            const response = await fetch(url);
            const data = await response.json();
            
            document.getElementById('result').innerHTML = `
                <h2>Results for ${region}:</h2>
                <p>Total: ${data.pagination.total} properties</p>
                <pre>${JSON.stringify(data, null, 2)}</pre>
            `;
        } catch (error) {
            document.getElementById('result').innerHTML = `<p>Error: ${error.message}</p>`;
            console.error('Error:', error);
        }
    });
    </script>
</body>
</html>